(function(e){function t(t){for(var r,s,l=t[0],c=t[1],a=t[2],d=0,h=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,a||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},2389:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=(n("034f"),n("2877")),l={},c=Object(s["a"])(l,i,o,!1,null,null,null),a=c.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("ArButton",{attrs:{engine:"WebXR",tracking:"",model:e.model,buttonStyle:""}})],1)},h=[],w=n("5a89"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"ar_container"}})},b=[],f=(n("ac1f"),n("5319"),n("d4ec")),p=n("bee2"),_=function(){function e(){Object(f["a"])(this,e)}return Object(p["a"])(e,null,[{key:"createButton",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("button");function i(){var t=null;function i(n){n.addEventListener("end",o),e.xr.setReferenceSpaceType("local"),e.xr.setSession(n),r.textContent="STOP AR",t=n}function o(){t.removeEventListener("end",o),r.textContent="START AR",t=null}r.style.display="",r.style.cursor="pointer",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){null===t?navigator.xr.requestSession("immersive-ar",n).then(i):t.end()}}function o(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function s(){o(),r.textContent="AR NOT SUPPORTED"}function l(e){e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",t&&l(r),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?i():s()})).catch(s),r;var c=document.createElement("a");return!1===window.isSecureContext?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}]),e}(),m={name:"ArButton",props:["engine","tracking","model","buttonStyle"],data:function(){return{webxr_camera:null,webxr_scene:null,webxr_renderer:null,webxr_controller:null,webxr_container:null,webxr_reticle:null,webxr_hitTestSource:null,webxr_hitTestSourceRequested:!1}},methods:{setArEngine:function(){console.log(this.$props)},initWebXR:function(){this.webxr_scene=new w["i"],this.webxr_camera=new w["g"](70,window.innerWidth/window.innerHeight,.01,20);var e=new w["c"](16777215,12303359,1);e.position.set(.5,1,.25),this.webxr_scene.add(e),this.webxr_renderer=new w["j"]({antialias:!0,alpha:!0}),this.webxr_renderer.setPixelRatio(window.devicePixelRatio),this.webxr_renderer.setSize(window.innerWidth,window.innerHeight),this.webxr_renderer.xr.enabled=!0,this.webxr_container.appendChild(this.webxr_renderer.domElement);var t=_.createButton(this.webxr_renderer,!0,{requiredFeatures:["hit-test"]});this.webxr_container.appendChild(t),this.webxr_controller=this.webxr_renderer.xr.getController(0),this.webxr_controller.addEventListener("select",this.webxr_onSelect),this.webxr_scene.add(this.webxr_controller),this.webxr_reticle=new w["d"](new w["h"](.15,.2,32).rotateX(-Math.PI/2),new w["e"]),this.webxr_reticle.matrixAutoUpdate=!1,this.webxr_reticle.visible=!1,this.webxr_scene.add(this.webxr_reticle)},webxr_onSelect:function(){if(this.webxr_reticle.visible){var e=new w["b"](.1,.1,.2,32).translate(0,.1,0),t=new w["f"]({color:16777215*Math.random()}),n=new w["d"](e,t);n.position.set(0,0,-.3).applyMatrix4(this.webxr_controller.matrixWorld),n.quaternion.setFromRotationMatrix(this.webxr_controller.matrixWorld),this.webxr_scene.add(n)}},webxr_Animate:function(){this.webxr_renderer.setAnimationLoop(this.webxr_Render)},webxr_Render:function(e,t){if(t){var n=this.webxr_renderer.xr.getReferenceSpace(),r=this.webxr_renderer.xr.getSession();if(!1===this.webxr_hitTestSourceRequested&&(r.requestReferenceSpace("viewer").then((function(e){r.requestHitTestSource({space:e}).then((function(e){this.webxr_hitTestSource=e}))})),r.addEventListener("end",(function(){this.webxr_hitTestSourceRequested=!1,this.webxr_hitTestSource=null})),this.webxr_hitTestSourceRequested=!0),this.webxr_hitTestSource){var i=t.getHitTestResults(this.webxr_hitTestSource);if(i.length){var o=i[0];this.webxr_reticle.visible=!0,this.webxr_reticle.matrix.fromArray(o.getPose(n).transform.matrix)}else this.webxr_reticle.visible=!1}}this.webxr_renderer.render(this.webxr_scene,this.webxr_camera)},onWindowResize:function(){this.webxr_camera.aspect=window.innerWidth/window.innerHeight,this.webxr_camera.updateProjectionMatrix(),this.webxr_renderer.setSize(window.innerWidth,window.innerHeight)}},mounted:function(){this.webxr_container=document.querySelector("#ar_container"),window.addEventListener("resize",this.onWindowResize,!1),"WebXR"==this.engine&&this.initWebXR()},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize,!1),null!=this.webxr_controller&&this.webxr_controller.removeEventListener("select",this.webxr_onSelect)}},v=m,y=(n("d2e1"),Object(s["a"])(v,x,b,!1,null,"a16b0940",null)),g=y.exports,S={name:"Home",components:{ArButton:g},data:function(){return{model:null}},methods:{setModel:function(){var e=new w["a"],t=new w["e"]({color:65280}),n=new w["d"](e,t);this.model=n}}},R=S,T=Object(s["a"])(R,d,h,!1,null,null,null),E=T.exports;r["a"].use(u["a"]);var O=[{path:"/",name:"Home",component:E}],A=new u["a"]({routes:O}),j=A;r["a"].config.productionTip=!1,new r["a"]({router:j,render:function(e){return e(a)}}).$mount("#app")},"85ec":function(e,t,n){},d2e1:function(e,t,n){"use strict";n("2389")}});
//# sourceMappingURL=app.2ad3b4e8.js.map